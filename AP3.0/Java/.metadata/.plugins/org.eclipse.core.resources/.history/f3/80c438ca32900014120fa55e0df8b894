package gui.depense;

import java.awt.Dimension;
import java.awt.GridLayout;
import java.util.Vector;

import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;

@SuppressWarnings("serial")
public class TabDepense extends JPanel {
	
	private MyTableModel m_table_model;
	
	public TabDepense()
	{
		super(new GridLayout(1, 0));
		
		m_table_model = new MyTableModel();
		JTable table = new JTable(m_table_model);
		m_table_model.addRow(new MyData("Bus", 4000));
		table.setPreferredScrollableViewportSize(new Dimension(700, 400));
		table.setFillsViewportHeight(true);
		table.setRowHeight(30);
		
		JScrollPane scrollPane = new JScrollPane(table);
		add(scrollPane);
	}
	
	public MyTableModel getTableModel()
	{
		return m_table_model;
	}
	
	public class MyTableModel extends AbstractTableModel
	{
		private String[] columnNames = { "Intitulé", "Montant" };
		
		/*
		private Object[][] data = {
				{ "Prendre des bus", new Integer(4000) },
				{ "Essence", new Integer(40000) },
				{ "Nourriture", new Integer(50000) },
				{ "Livres", new Integer(85600) },
				{ "Auberge", new Integer(120000) },
				{ "Frais d'assurance", new Integer(385000) },
				{ "Des photos", new Integer(6000) }
		};
		*/
		
		private Vector<MyData> data = new Vector<MyData>(10, 10);
		
		public Vector<MyData> getVectorData()
		{
			return data;
		}
		
		public MyTableModel(Vector<MyData> data_input)
		{
			super();
			
			data = data_input;
		}
		
		@Override
		public int getRowCount() {
			return data.size();
		}

		@Override
		public int getColumnCount() {
			return columnNames.length;
		}

		@Override
		public Object getValueAt(int rowIndex, int columnIndex) {
			System.out.println("Row index = " + rowIndex + ", Column index = " + columnIndex);
			System.out.println("Position = " + rowIndex*2 + columnIndex);
			return data.elementAt(rowIndex*2 + columnIndex);
		}
		
        @SuppressWarnings({ "unchecked", "rawtypes" })
		public Class getColumnClass(int c) {
            return getValueAt(0, c).getClass();
        }
        
        public void addRow(MyData new_data)
        {
        	data.addElement(new_data);
        	fireTableDataChanged();
        }
        
        public boolean isCellEditable(int row, int col)
        {
        	if(col < 2)
        	{
        		return false;
        	}
        	else
        	{
        		return true;
        	}
        }
        
        public void setValueAt(MyData value, int row, int col)
        {
        	data.set(row*2 + col, value);
        }
	 
	}
}
