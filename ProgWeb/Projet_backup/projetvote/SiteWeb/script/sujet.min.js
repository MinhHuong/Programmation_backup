function SubTopic(i,t,e){this.ID=i,this.Titre=t,this.URLImg=e}function Topic(i,t,e){this.ID=i,this.Titre=t,this.Subtopics=e}function findTopicById(i){for(var t=0;t<topics.length;t++)if(topics[t].ID==parseInt(i))return topics[t];return null}function initializeTopic(){var i,t,e,o,r,a=new Array,n=new Array,c=new Array,i=new SubTopic(1,"soleil","../img/sun.jpg"),t=new SubTopic(2,"pluie","../img/rain.jpg"),e=new SubTopic(3,"neige","../img/snow.jpg"),o=new SubTopic(4,"brouillard","../img/mist.jpg");a.push(i),a.push(t),a.push(e),a.push(o);var r=new Topic(1,"Meteo",a);topics.push(r);var i=new SubTopic(5,"rouge","../img/red.jpeg"),t=new SubTopic(6,"vert","../img/green.png"),e=new SubTopic(7,"bleu","../img/blue.jpg"),o=new SubTopic(8,"jaune","../img/yellow.jpg");n.push(i),n.push(t),n.push(e),n.push(o);var r=new Topic(2,"Couleur",n);topics.push(r);var i=new SubTopic(9,"smaug","../img/smaug.jpg"),t=new SubTopic(10,"the ring","../img/onering.jpg"),e=new SubTopic(11,"gollum","../img/gollum.jpeg"),o=new SubTopic(12,"arkenstone","../img/arkenstone.jpg");c.push(i),c.push(t),c.push(e),c.push(o);var r=new Topic(3,"Hobbit",c);topics.push(r)}function changeDisplayStyle(i){1==i?($(".modifying").css("display","none"),$("h2.ready").css({display:"block"}),$(".subtopic-content").css({display:"inline-block"}),$(".subtopic").css("display","inline-block"),$("p.ready").css({display:"block"}),$("#btn-ready, #btn-edit").css({display:"inline"}),$(".subtopic-content img").css({"box-shadow":"5px 5px 5px #A4A4A4"})):0==i&&($(".ready").css("display","none"),$(".modifying").css("display","inline-block"),$(".subtopic-content").css({width:"122px"}),$("input[type='text'].modifying").css({display:"inline-block",border:"1px solid #CCCCCC"}))}function setTopic(i){if(null!=i){var t=i.Subtopics;$("#area-topic h2").text(i.Titre.toUpperCase());for(var e=1;e<=t.length;e++){var o="subtopic"+e;$("#"+o+" p").html(t[e-1].Titre.toUpperCase()),$("#"+o+" img").attr("src",t[e-1].URLImg)}$("#radio-"+i.ID+" + label > p").text(i.Titre)}else{for(var e=1;4>=e;e++){var r="subtopic"+e;$("#"+r+" > div > img").attr("src","../img/default0"+e+".png"),$("#"+r+" > div > p").text("Subtopic")}$("h2.ready").text("TOPIC"),$("#btn-ready").addClass("disabled")}}function radioOnClick(i){var t=i.indexOf("-");if(-1!=t){var e=i.substring(t+1),o=findTopicById(e);setTopic(o),$("#btn-ready").removeClass("disabled")}else{for(var r=1;4>=r;r++){var a="subtopic"+r;$("#"+a+" > div > img").attr("src","../img/default0"+r+".png"),$("#"+a+" > div > p").text("Subtopic")}$("h2.ready").text("TOPIC"),$("#btn-ready").addClass("disabled")}}function turnOnOffRadio(i){var t=$("input[type=radio]");$(t).each(function(){$(this).attr("disabled",i)})}function isValid(i,t){var e=!0;return""==i?($(t).css("border","1px solid red"),$(t).attr("placeholder","*** NON VIDE !"),e=!1):/^[a-zA-Z- ]*$/.test(i)?($(t).css("border","1px solid #A4A4A4"),$(t).attr("placeholder","")):($(t).css("border","1px solid red"),$(t).val(""),$(t).attr("placeholder","A-Z seulement !"),e=!1),e}function urlImgValid(i){return"../img/error-img.png"==i?!1:!0}function allUrlImgValid(){for(var i,t=1;4>=t;t++)if(i="subtopic"+t,"../img/error-img.png"==$("#"+i+" > div > img").attr("src"))return!1;return!0}var topics=[],oldTopic=null,_idTopic=4;$(document).ready(function(){initializeTopic(),$("#radio-3").attr("checked",!0),$("input[type=radio]").click(function(){radioOnClick($(this).attr("id"))}),$(".modifying").css("display","none"),$("#btn-ready").click(function(){window.location.replace("../html/voting.html")}),$("#btn-edit").click(function(){changeDisplayStyle(0),turnOnOffRadio(!0);var i=$("input[type=radio]:checked").attr("id").indexOf("-");if(-1!=i){var t=$("input[type=radio]:checked").attr("id").substring(i+1);oldTopic=findTopicById(parseInt(t)),$("#topic").val(oldTopic.Titre);for(var e=1;4>=e;e++){var o="subtopic"+e;$("#"+o+" > div > input[type='text']").val(oldTopic.Subtopics[e-1].Titre)}}else{$("#topic").val("TOPIC");for(var e=1;4>=e;e++){var o="subtopic"+e;$("#"+o+" > div > input[type='text']").val("Subtopic")}}}),$("#btn-edit-confirm").click(function(){var i,t,e=!0;if(null!=oldTopic){for(var o=1;4>=o;o++){if(i="subtopic"+o,t="#"+i+" > div > input[type='text']",isValid($(t).val(),t)){var r=$(t).val();oldTopic.Subtopics[o-1].Titre=r}else e=!1;var a=$("#"+i+" > div > img").attr("src");urlImgValid(a)&&(oldTopic.Subtopics[o-1].URLImg=a)}isValid($("#topic").val(),"#topic")?oldTopic.Titre=$("#topic").val():e=!1,e&&allUrlImgValid()&&setTopic(oldTopic)}else{for(var n,t,a,c=new Array,o=1;4>=o;o++)if(i="subtopic"+o,t="#"+i+" > div > input[type='text']",a=$("#"+i+" > div > img").attr("src"),isValid($(t).val(),$(t))&&urlImgValid(a)){var r=$(t).val();n=new SubTopic(4*(_idTopic-1)+o,r,a),c.push(n)}else e=!1;if(isValid($("#topic").val(),"#topic"))var p=$("#topic").val();else e=!1;if(e&&allUrlImgValid()){var l=new Topic(_idTopic,p,c);topics.push(l);var s=document.createElement("input");$(s).attr({type:"radio",name:"theme",checked:"checked",id:"radio-"+_idTopic}),$(s).click(function(){radioOnClick($(s).attr("id"))}),$("#radionew").before($(s));var d=document.createElement("label");$(d).attr({"for":$(s).attr("id")});var u=document.createElement("p");$(u).text(p),$(d).append($(u)),$("#radionew").before($(d));var g=document.createElement("br");$("#radionew").before($(g)),setTopic(l),_idTopic++}}if(e&&allUrlImgValid())$("#btn-ready").removeClass("disabled"),turnOnOffRadio(!1),oldTopic=null,changeDisplayStyle(1);else for(var o=1;4>=o;o++){i="subtopic"+o;var a=$("#"+i+" > div > img").attr("src");urlImgValid(a)?$("#"+i+" > div > img").css("box-shadow","5px 5px 5px #A4A4A4"):$("#"+i+" > div > img").css("box-shadow","5px 5px 5px #FE2E2E")}}),$("#btn-edit-cancel").click(function(){changeDisplayStyle(1),setTopic(oldTopic),oldTopic=null,turnOnOffRadio(!1)}),$(".subtopic button").click(function(){var i=$(this).parent()[0].id;$("#"+i+"-selectfile").click()}),$("input[type=file]").change(function(){var i=$(this)[0].files;if(i.length>0){var t=i[0],e=$(this).attr("id").indexOf("-"),o=$(this).attr("id").substring(0,e);if(t.type.match("image.*")){var r=new FileReader;r.onload=function(i){$("#"+o+" img").attr({src:i.target.result})},r.readAsDataURL(t)}else $("#"+o+" img").attr({src:"../img/error-img.png"})}}),$('[data-toggle="tooltip"]').tooltip()});