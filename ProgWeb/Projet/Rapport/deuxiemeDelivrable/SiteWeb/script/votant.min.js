function Votant(t,e,o,r){this.ID=t,this.Prenom=e,this.Nom=o,this.URLImg=r}function findVotantById(t){for(var e=0;e<votants.length;e++)if(votants[e].ID==t)return votants[e]}function buildDivVotant(t){var e=document.createElement("div"),o=document.createElement("img");$(o).attr({src:t.URLImg,width:"120px",height:"120px",alt:t.Prenom+" "+t.Nom});var r=document.createElement("p");return $(r).html(t.Prenom||t.Nom?t.Prenom+"<br>"+t.Nom:t.ID),$(r).css({textAlign:"center",margin:"5px"}),$(e).append(o),$(e).append(r),$(e).css({margin:"15px",border:"1px solid #000000",display:"inline-block",width:"122px","box-shadow":"5px 5px 5px #A4A4A4"}),$(e).hover(function(){$(this).css({"box-shadow":"8px 8px 8px #A9BCF5",cursor:"pointer"})},function(){$(this).css("box-shadow","5px 5px 5px #A4A4A4")}),$(e).attr("id",_id),$(e).click(function(){$(this).css("box-shadow","8px 8px 8px #A9BCF5"),$(this).find("p").css("font-weight","bold"),$(this).css("background-color","#81BEF7"),null!=chosenVotant&&chosenVotant.ID!=$(e).attr("id")&&($("#"+chosenVotant.ID).css("background-color","#FFFFFF"),$("#"+chosenVotant.ID).find("p").css("font-weight","normal")),chosenVotant=findVotantById($(this).attr("id"))}),e}function checkForm(t){var e=!0,o=0==t?"add":"edit",r="#"+o+"-prenom",n="#"+o+"-nom";return""==$(r).val()?($(r).css("border-color","red"),$(r).attr("placeholder","*** Veuillez entrer le Prénom !"),e=!1):/^[a-zA-Z- ]*$/.test($(r).val())?($(r).css("border-color","#CCCCCC"),$(r).attr("placeholder","Son prénom")):($(r).css("border-color","red"),$(r).val(""),$(r).attr("placeholder","*** Symboles/Chiffres non acceptes !"),e=!1),""==$(n).val()?($(n).css("border-color","red"),$(n).attr("placeholder","*** Veuillez entrer le Nom !"),e=!1):/^[a-zA-Z- ]*$/.test($(n).val())?($(n).css("border-color","#CCCCCC"),$(n).attr("placeholder","Son nom")):($(n).css("border-color","red"),$(n).val(""),$(n).attr("placeholder","*** Symboles/Chiffres non acceptes !"),e=!1),e}function getInstruction(t){switch(t[0].id){case"item-add":return"<b>AJOUTER UN PETIT VOTANT</b><br><br>Cliquer sur cet item, s'affiche alors un formulaire. Completer ce très simple formulaire pour ajouter un petit votant à la liste";case"item-edit":return"<b>MODIFIER UN PETIT VOTANT</b><br><br>Cliquer sur la photo du petit votant que vous voulez, puis cliquer sur cet item pour le modifier (la photo choisie sera marquee en différente couleur)";case"item-remove":return"<b>ENLEVER UN PETIT VOTANT</b><br><br>Cliquer sur la photo du petit votant que vous voulez, puis cliquer sur cet item pour l'enlever de la liste (la photo choisie sera marquee en différente couleur)";default:return""}}function getBackgroundColorLeftMenu(t){switch(t[0].id){case"item-add":return"#F3F781";case"item-edit":return"#A9D0F5";case"item-remove":return"#F78181";default:return"CCCCCC"}}var _id=1,votants=[],chosenVotant=null;$(document).ready(function(){$(this).click(function(){$("#waiting").hide("slow")}),$("#menu-manag > li").hover(function(){var t=getInstruction($(this));$(this).css({"background-color":getBackgroundColorLeftMenu($(this)),"font-weight":"bold"}),$("#instruction > p").html(t),$("#instruction > p").css("color","#000000")},function(){$(this).css({"background-color":"#FFFFFF","font-weight":"normal"}),$("#instruction > p").html("")}),$(".menu-page-item").hover(function(){"VOTANTS"==$(this).text()&&$("#instruction > p").html("<b>VOTANTS</b><br><br>Aller à la partie de gestion des petits votants"),"VOTE DU JOUR"==$(this).text()&&$("#instruction > p").html("<b>VOTE DU JOUR</b><br><br>Aller à la partie de gestion de la vote du jour")},function(){$("#instruction > p").html("")}),$("#item-add").css("cursor","pointer"),$("#item-edit").css("cursor","pointer"),$("#item-remove").css("cursor","pointer"),$("#item-add").click(function(){$("#add-prenom").css("border-color","#CCCCCC"),$("#add-nom").css("border-color","#CCCCCC"),$("#modal-add").modal({backdrop:"static"})}),$("#item-edit").click(function(){null!=chosenVotant?($("#modal-edit form")[0].reset(),$("#edit-prenom").attr("value",chosenVotant.Prenom),$("#edit-nom").attr("value",chosenVotant.Nom),$("#img-field-edit").attr({src:chosenVotant.URLImg}),$("#modal-edit").modal({backdrop:"static"})):($("#instruction > p").html("<b>AUCUN VOTANT CHOISI</b><br><br>Veuillez choisir un petit votant pour faire des modifications"),$("#instruction > p").css("color","red"))}),$("#item-remove").click(function(){null!=chosenVotant?($("#remove-nom-prenom").text(chosenVotant.Prenom+" "+chosenVotant.Nom),$("#img-field-remove").attr({src:chosenVotant.URLImg}),$("#modal-remove").modal({backdrop:"static"})):($("#instruction > p").html("<b>AUCUN VOTANT CHOISI</b><br><br>Veuillez choisir un petit votant pour l'enlever de la liste"),$("#instruction > p").css("color","red"))}),$("#modal-add").on("show.bs.modal",function(){$("#modal-add form")[0].reset(),$("#add-prenom").attr("placeholder","Son prénom"),$("#add-nom").attr("placeholder","Son nom"),$("#img-field-add").attr({src:"../img/defaultIMG.png"})}),$("#modal-add").keydown(function(t){13!=t.which||$("#add-confirm").is(":focus")||$("#add-cancel").is(":focus")||t.preventDefault()}),$("#modal-edit").on("show.bs.modal",function(){$("#modal-edit form")[0].reset()}),$("#add-confirm").click(function(){if(checkForm(0)){var t=$("#add-prenom")[0].value,e=$("#add-nom")[0].value,o=$("#img-field-add").attr("src"),r=new Votant(_id,t,e,o);votants.push(r);var n=buildDivVotant(r);$("#tab-image").append(n),$(n).trigger("click"),$("#modal-add").modal("hide"),_id++}return!1}),$("#add-cancel").click(function(){return $("#modal-add").modal("hide"),!1}),$("#edit-confirm").click(function(){return checkForm(1)&&(chosenVotant.Nom=$("#edit-nom").val(),chosenVotant.Prenom=$("#edit-prenom").val(),chosenVotant.URLImg=$("#img-field-edit").attr("src"),$("#"+chosenVotant.ID).find("p").html(chosenVotant.Prenom+"<br>"+chosenVotant.Nom),$("#"+chosenVotant.ID).find("img").attr("src",chosenVotant.URLImg),$("#modal-edit").modal("hide")),!1}),$("#edit-cancel").click(function(){return $("#modal-edit").modal("hide"),!1}),$("#remove-confirm").click(function(){return votants.splice(votants.indexOf(chosenVotant),1),$("#"+chosenVotant.ID).remove(),chosenVotant=null,$("#modal-remove").modal("hide"),!1}),$("#remove-cancel").click(function(){return $("#modal-remove").modal("hide"),!1}),$("#btn-add-img").click(function(){return $("#select-file-add").click(),!1}),$("#btn-edit-img").click(function(){return $("#select-file-edit").click(),!1}),$("#select-file-add").change(function(){var t=$(this)[0].files;if(t.length>0){var e=t[0];if(e.type.match("image.*")){var o=new FileReader;o.onload=function(t){$("#img-field-add").attr({src:t.target.result})},o.readAsDataURL(e)}else $("#img-field-add").attr({src:"../img/error-img.png"})}return!1}),$("#select-file-edit").change(function(){var t=$(this)[0].files;if(t.length>0){var e=t[0];if(e.type.match("image.*")){var o=new FileReader;o.onload=function(t){$("#img-field-edit").attr({src:t.target.result})},o.readAsDataURL(e)}else $("#img-field-edit").attr({src:"../img/error-img.png"})}return!1})});